// 你的语气选项
export const TONE_OPTION_TAGS = [
    { key: 'sincere', label: '真诚推荐' },
    { key: 'hot', label: '热情夸夸' },
    { key: 'plain', label: '平实日常' },
    { key: 'business', label: '商务理性' },
    { key: 'humor', label: '幽默一点' },
    { key: 'safe', label: '保守稳妥（不踩雷）' },
] as const;

export type ToneKey = (typeof TONE_OPTION_TAGS)[number]['key'];

/**
 * 把“语气 key 或中文描述”转换成一段具体的语气说明
 * 用在大模型 prompt 里，让模型真正感知到风格差异
 */
export function normalizeTone(tone?: string): string {
    if (!tone) {
        return '整体语气自然真实、像普通用户写的好评，不浮夸、不做广告，用日常聊天的表达方式即可。';
    }

    const raw = tone.trim();

    // 先尝试当成 key 使用
    const key = (raw.toLowerCase() as ToneKey);

    // 统一的结尾提示，强调“语气优先级”
    const suffix =
        '在满足内容要求的前提下，优先保证整体语气风格统一、明显，与普通中性好评有清晰区别。';

    switch (key) {
        case 'sincere':
            return (
                '整体语气是“真诚推荐”：像认真给朋友安利一家店，语言温暖、有共情感，' +
                '会提到体验中的小细节（比如店员小动作、环境的小贴心），' +
                '不会过度夸张或像广告，能适度提一两个小缺点，但总体偏正向，把“真实可信”放在第一位。' +
                suffix
            );
        case 'hot':
            return (
                '整体语气是“热情夸夸”：情绪比较高，夸赞的词可以多一点，适当使用感叹号，' +
                '重点强调“好到超出预期”的感受，可以用夸张但不油腻的表达，' +
                '比如“本来就随便找个地方吃一口，结果彻底被惊喜到了”这一类说法，' +
                '但不要像硬广或口号式文案。' +
                suffix
            );
        case 'plain':
            return (
                '整体语气是“平实日常”：像写日记或和朋友聊天，叙述为主、形容词适量，' +
                '多用具体事实和细节来表达满意，而不是堆砌“好评词”，' +
                '情绪比较平和、不激动，整体给人“真实、可靠、不做作”的感觉。' +
                suffix
            );
        case 'business':
            return (
                '整体语气是“商务理性”：偏理性、克制和专业，条理清晰，' +
                '可以从环境安静程度、私密性、交通便利、服务效率、价格区间、适合商务洽谈/请客等角度来写，' +
                '少用口语化感叹，多用客观描述和理性评价，整体像严谨但不生硬的商务点评。' +
                suffix
            );
        case 'humor':
            return (
                '整体语气是“幽默一点”：轻松、有趣，带一点自嘲和日常段子，' +
                '可以用好玩的比喻或小吐槽来表现满意，比如“本来以为随便吃一顿，结果减肥计划又被按下暂停键”，' +
                '幽默要自然、不油腻，不要使用过多网络梗或太夸张的玩笑。' +
                suffix
            );
        case 'safe':
            return (
                '整体语气是“保守稳妥”：整体评价偏中性偏好，更多是“还不错”“基本不会踩雷”这种感觉，' +
                '不会出现极端的夸张词（例如“一生推”“yyds”），' +
                '更像是认真给别人提供一个可靠选择的建议，适合对踩雷敏感的人群。' +
                suffix
            );
    }

    // 如果传的是中文 label / 自定义描述，做一个兜底
    if (raw.includes('幽默')) {
        return (
            '整体语气偏幽默、轻松，有一点点自嘲和搞笑的比喻，' +
            '像会讲段子但不过火的朋友在分享体验，不油腻、不尴尬。' +
            suffix
        );
    }
    if (raw.includes('商务')) {
        return (
            '整体语气偏商务、理性和克制，从环境、效率、性价比、适合场景等角度进行理性评价，' +
            '少用感叹词，像一份靠谱的商务推荐意见。' +
            suffix
        );
    }

    // 兜底：直接包一下原始文案
    return `整体语气风格为「${raw}」，请在内容中明显体现这种语气特点，而不是普通中性好评。${suffix}`;
}
